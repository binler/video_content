<%= stylesheet_link_tag '../infusion/framework/fss/css/fss-layout.css', :plugin=>"fluid-infusion" %>

<%#=javascript_include_tag '../infusion/framework/core/js/ProgressiveEnhancement.js', '../infusion/InfusionAll.js', :cache=>true, :plugin=>"fluid-infusion" %>

<style type="text/css" rel="stylesheet">
	/* TODO: These uploader elements are hidden for our demonstration. Put this CSS in an external stylesheet soon. */
	form.fl-progEnhance-basic, .fl-uploader-manually-degrade {display:none;}
</style>


<div id="uploader-contents">
    
    <!-- This form will be progressively enhanced by the Fluid Uploader component. -->
    <form method="post" enctype="multipart/form-data" class="fl-uploader fl-progEnhance-basic">
        <p>Browse to upload a file.</p>
        <input name="fileData" type="file" />
        <div><input type="submit" value="Save"/></div>
    </form>
    
    <!-- This is the markup for the Fluid Uploader component itself. -->
    <form class="flc-uploader fl-uploader fl-progEnhance-enhanced" 
          method="get" 
          enctype="multipart/form-data">
        <p>Upload a file</p>      
        <!-- The file queue -->
        <div class="fl-uploader-queue-wrapper">
            
            <!-- Scrollable view -->
            <div class="flc-scroller fl-scroller">
                <div class="fl-scroller-inner">
                    <table cellspacing="0" class="flc-uploader-queue fl-uploader-queue" summary="Queue of files to upload.">
                        <tbody>
                            <!-- Rows will be rendered in here. -->
                            
                            <!-- Template markup for the file queue rows -->
                            <tr class="flc-uploader-file-tmplt flc-uploader-file fl-uploader-hidden-templates">
                                <th class="flc-uploader-file-name fl-uploader-file-name" scope="row">File Name Placeholder</th>


                                <td class="flc-uploader-file-size fl-uploader-file-size">0 KB</td>
                                <td class="fl-uploader-file-actions">
                                    <button type="button" class="flc-uploader-file-action fl-uploader-file-action" title="Remove File" tabindex="-1">
                                        <span class="fl-uploader-button-text fl-uploader-hidden">Remove file from queue</span>
                                    </button>
                                </td>
                            </tr>
                            
                            <!-- Template for the file error info rows -->
                            <tr class="flc-uploader-file-error-tmplt fl-uploader-file-error fl-uploader-hidden-templates">
                                <td colspan="3" class="flc-uploader-file-error"></td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="flc-uploader-file-progressor-tmplt fl-uploader-file-progress"><span class="fl-uploader-file-progress-text fl-uploader-hidden">76%</span></div>
                </div>
            </div>
            
            <div class="flc-uploader-browse-instructions fl-uploader-browse-instructions"></div>

            <!-- Foot of the queue -->
            <div class="flc-uploader-queue-footer fl-uploader-queue-footer">
                
                <table cellspacing="0" cellpadding="0" summary="Status of file queue.">

                        <tr>
                            <td class="flc-uploader-total-progress-text">
                                <!-- Total: <span class="fl-uploader-totalFiles">0</span> files 
                                (<span class="fl-uploader-totalBytes">0 KB</span>) -->
                            </td>
                            <td class=".fl-uploader-footer-buttons" align="right" >
                                <a href="#" class="flc-uploader-button-browse fl-uploader-browse">Browse for Files</a>
                            </td>
                        </tr>

                </table>
                <div class="flc-uploader-total-progress fl-uploader-total-progress-okay">&nbsp;</div>
            </div>

        </div>
        
        <!-- Action buttons -->
        <div class="fl-uploader-btns">
            <button type="button" class="flc-uploader-button-pause fl-uploader-pause fl-uploader-hidden">Stop Upload</button><button type="button" class="flc-uploader-button-upload fl-uploader-upload fl-uploader-button-default fl-uploader-dim ui-button ui-widget ui-state-default" disabled="disabled">Upload</button>
        </div>
    </form>
</div>

<form id="new_external_link" class="fl-uploader" action="<%= url_for(:action=>"create", :controller=>"external_assets")%>" method="post" data-resourceType="external_asset" accept-charset="utf8">
  <div><br/><p>Link to a file</p></div>
  <div class="fl-uploader-queue-wrapper">
    <div class="flc-uploader-queue-footer fl-uploader-queue-footer">
      <table cellspacing="0" cellpadding="0">
	<tr>
	  <input type="hidden" name="container_id" value="<%=params[:container_id]%>">
	  <td><%= fedora_field_label("properties", [:uri], "URL:") %></td>
	  <td><input name="dsLocation" value=""></td>
	</tr>
	<tr>
	  <td><%= fedora_field_label("properties", [:label], "Filename:") %></td>
	  <td><input name="label" value=""></td>
	</tr>
      </table>
    </div>  
  </div>
  <div class="fl-uploader-btns">
    <button type="submit" class="flc-uploader-button-upload fl-uploader-upload fl-uploader-button-default fl-uploader-dim ui-button ui-widget ui-state-default">Add File Link</button>
  </div>

</form>
<div style="clear:both;"></div>
